# VaelorCMS 管理员指南

> 写给「要管这个站」的你。看完这篇，你就能把站点调成自己想要的样子。

---

## 一、管理员能干啥

管理员（`role=admin`）登录后，顶栏会多一个「管理」入口。点进去能看到：

- **用户管理**：看所有用户，必要时可以处理
- **帖子管理**：看论坛帖子
- **代码管理**：看代码分享
- **文章管理**：跳转到 Django 后台，管理文章
- **操作日志**：谁干了啥，留个底
- **站点设置**：改站点名、安全策略、注册开关、维护模式等

下面重点说「站点设置」，这是最常用的。

---

## 二、站点设置（管理员设置）

路径：**管理** → **站点设置**，或者直接访问 `/admin-panel/settings/`。

设置按标签分成了几块，一块块说。

### 站点（general）

| 设置项 | 说明 | 建议 |
|--------|------|------|
| 站点名称 | 顶栏、页脚显示的名字 | 填你站的名字 |
| 站点描述 | SEO 用，搜索引擎会抓 | 一两句介绍站点干啥的 |
| 关键词 | SEO 用，逗号分隔 | 如：论坛, 代码分享, 技术 |
| 时区 | 时间显示用 | 国内一般 `Asia/Shanghai` |
| 语言 | 界面语言 | 一般 `zh-hans` |

改完点「保存」就行，刷新页面就能看到效果。

### 安全（security）

| 设置项 | 说明 | 建议 |
|--------|------|------|
| 登录失败上限 | 连续输错几次就锁 | 5～10 都行，别太小 |
| 锁定时长（分钟） | 锁多久 | 15～60 分钟 |
| 密码最小长度 | 注册和改密码时的要求 | 8 位比较稳妥 |
| 强密码要求 | 是否必须包含字母+数字 | 建议开，防弱密码 |
| 密码须含特殊字符 | 是否必须包含 !@#$%^&* 等 | 高安全场景可开 |
| API 限流（次/分钟） | 每 IP 每分钟最大请求数 | 60 或 0（不限） |
| 会话有效期（天） | 登录状态保持多久 | 7 天比较常见 |
| 强制 HTTPS | 是否只允许 HTTPS 访问 | 生产环境建议开 |

**注意：** 这些设置存在数据库里，改完立即生效，不用重启服务。

### 用户（user）

| 设置项 | 说明 | 建议 |
|--------|------|------|
| 开放注册 | 是否允许新用户注册 | 内测时可关，正式再开 |
| 需邮箱验证 | 注册后要不要验证邮箱 | 看需求，一般先关 |
| 默认角色 | 新用户默认角色 | 一般 `user` |

**关注册后：** 访客点「注册」会提示「注册已关闭」，只有管理员能开新账号（通过 Django 后台或数据库）。

### 内容（content）

| 设置项 | 说明 | 建议 |
|--------|------|------|
| 论坛需审核 | 新帖要不要先审再显示 | 防 spam 可开 |
| 游客可发帖 | 未登录能否发帖 | 一般关，避免匿名乱发 |
| 文章评论 | 文章底下要不要评论 | 看需求 |

**论坛审核**：开启后，新帖需管理员在「帖子管理」中点击「通过」才会显示。**游客发帖**：开启后，未登录用户可发帖（显示为匿名）。

### 维护（maintenance）

| 设置项 | 说明 | 建议 |
|--------|------|------|
| 开启维护 | 是否进入维护模式 | 修站、迁移数据时开 |
| 维护提示 | 访客看到的提示文字 | 写清楚「几点恢复」之类 |

**维护模式下：** 普通用户访问任何页面都会看到维护提示；**管理员**可以正常访问，方便你边修边看效果。关掉维护模式后，大家就能正常访问了。

---

## 三、Django 后台

除了自定义的「管理」面板，还有 Django 自带的 Admin：`/admin/`。

用管理员账号登录后，可以：

- 管理用户、文章、论坛、代码等模型
- 做更细的增删改查
- 批量操作

**文章管理**：自定义面板里点「文章管理」会跳转到 Django Admin 的文章列表，那里可以审核、编辑、删除文章。

---

## 四、操作日志

在「管理」→「操作日志」里，能看到谁在什么时候干了啥。方便排查问题、追责。

---

## 五、常见场景

### 场景 1：刚部署完，想先内测

1. 去「站点设置」→「用户」→ 关掉「开放注册」
2. 自己注册好管理员账号（或安装时已创建）
3. 需要加人时，去 Django 后台手动创建用户，或临时开一下注册

### 场景 2：要修站，不想让人访问

1. 「站点设置」→「维护」→ 开启维护模式
2. 填好维护提示，比如「今晚 22:00～24:00 维护，预计 24:00 恢复」
3. 修完记得关掉维护模式

### 场景 3：有人暴力试密码

1. 安全策略里「登录失败上限」已经会锁账号
2. 如果还担心，可以调高「锁定时长」
3. 必要时去用户管理/Django 后台封禁该用户

### 场景 4：想改站点名字

1. 「站点设置」→「站点」→ 改「站点名称」
2. 保存，刷新页面即可

---

## 六、和 config.ini 的关系

- **config.ini**：安装时写的，主要是数据库、基础站点名等，一般不动
- **站点设置（数据库）**：管理员在网页里改的，优先级更高

比如「站点名称」：如果数据库里有设置，就用数据库的；没有就用 config.ini 的。这样你不用改配置文件也能调站点。

---

## 七、相关文档

- [安装教程](INSTALL.md)
- [配置说明](CONFIG.md) - config.ini 详解
- [部署指南](DEPLOYMENT.md)
- [云平台部署](DEPLOY-CLOUD.md)
